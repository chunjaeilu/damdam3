<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- SEO -->
    <meta property="og:type" content="website" />
    <meta
      property="og:url"
      content="https://port-0-damdamv2-4fuvwk25lcstd4fc.gksl2.cloudtype.app/"
    />
    <meta property="og:title" content="담담" />
    <meta property="og:image" content="https://i.ibb.co/qCCd1X7/Frame-2.png" />
    <meta property="og:description" content="금연 웹앱" />
    <meta property="og:site_name" content="DamDam" />
    <meta property="og:locale" content="Kor" />
    <meta name="keywords" content="금연, 웹앱" />
    <meta name="author" content="이름" />
    <meta name="description" content="DamDam 홈페이지입니다." />
    <link rel="icon" href="/images/favicon.png" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="theme-color" content="#1fab89" />
    <meta name="apple-mobile-web-app-status-bar-style" content="#1fab89" />
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />

    <title>Stage of Change</title>
    <link rel="stylesheet" href="css/style2.css" />
    <link rel="stylesheet" href="css/black.css" />
    <link rel="stylesheet" href="css/lang.css" />
  </head>

  <body id="stage" class="<%= modeArr[0].mode %>">
    <div class="wrap <%= langArr[0].lang[0].kor%>">
      <header>
        <a href="/main"><img src="images/icon_arrow-back.svg" alt="back" /></a>
        <h1>변화 단계</h1>
      </header>
      <main>
        <% for( let i = 0; i < stage.length; i++ ) { %>
        <div class="content-box">
          <div class="box-title">
            <h3><%= stage[i].stage %></h3>
            <p><%= stage[i].goal %></p>
          </div>
          <p class="stage-txt"><%= stage[i].stageTxt %></p>
          <div class="prog-bar">
            <% let gage = Math.floor((pass/stage[i].min)*100 ) %> <% if (gage >=
            100) { %> <% gage = 100 %> <% } %>

            <progress max="100" value="<%= gage %>"></progress>
            <p class="gage"><%= gage %>%</p>
          </div>
        </div>
        <% } %>
      </main>
      <!-- footer -->
      <footer>
        <div class="home active">
          <a href="/main"><i class="fa-solid fa-house"></i></a>
        </div>
        <div class="achievement">
          <a href="/achievement"><i class="fa-solid fa-trophy"></i></a>
        </div>
        <div class="community">
          <a href="/community"><i class="fa-solid fa-user-group"></i></a>
        </div>
        <div class="calendar">
          <a href="/calendar"><i class="fa-solid fa-calendar-days"></i></a>
        </div>
      </footer>
    </div>

    <div class="wrap <%= langArr[0].lang[1].en%>">
      <header>
        <a href="/main"><img src="images/icon_arrow-back.svg" alt="back" /></a>
        <h1>stage of change</h1>
      </header>
      <main>
        <% for( let i = 0; i < stageEn.length; i++ ) { %>
        <div class="content-box">
          <div class="box-title">
            <h3><%= stageEn[i].stage %></h3>
            <p><%= stageEn[i].goal %></p>
          </div>
          <p class="stage-txt"><%= stageEn[i].stageTxt %></p>
          <div class="prog-bar">
            <% let gage = Math.floor((pass/stageEn[i].min)*100 ) %> <% if (gage
            >= 100) { %> <% gage = 100 %> <% } %>

            <progress max="100" value="<%= gage %>"></progress>
            <p class="gage"><%= gage %>%</p>
          </div>
        </div>
        <% } %>
      </main>
      <footer>
        <div class="home active">
          <a href="/main"><i class="fa-solid fa-house"></i></a>
        </div>
        <div class="achievement">
          <a href="/achievement"><i class="fa-solid fa-trophy"></i></a>
        </div>
        <div class="community">
          <a href="/community"><i class="fa-solid fa-user-group"></i></a>
        </div>
        <div class="calendar">
          <a href="/calendar"><i class="fa-solid fa-calendar-days"></i></a>
        </div>
      </footer>
    </div>

    <!-- fontA -->
    <script
      src="https://kit.fontawesome.com/67eff22c15.js"
      crossorigin="anonymous"
    ></script>

    <script>
      let boxEl = document.querySelectorAll(".content-box");
      let progressEl = document.querySelectorAll(".content-box progress");
      for (b = 0; b < boxEl.length; b++) {
        let progressValue = progressEl[b].attributes.value.value;
        if (progressValue >= 100) {
          boxEl[b].classList.add("complete");
        }
      }
      let completeBox = document.querySelectorAll(".content-box.complete");
      boxEl[completeBox.length].classList.add("challenge");
    </script>
  </body>
</html>
